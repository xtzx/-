<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Document</title>
        <style>
            #outer {
                width: 300px;
                height: 300px;
                border: 1px solid red;
            }
            #inner {
                width: 100px;
                height: 100px;
                border: 1px solid red;
            }
        </style>
        <link rel="stylesheet" href="./index.css" type="text/css" />
    </head>
    <body>
        <div id="outer">
            <div id="inner"></div>
        </div>

        <script>
            const inner = document.getElementById('inner');
            const outer = document.getElementById('outer');

            // 监听 outer 的属性变化。
            // new MutationObserver(() =>
            //     console.log('mutate outer')
            // ).observe(outer, { attributes: true });

            // 处理 click 事件。
            function handleClick() {
                console.log('click', this);
                setTimeout(() => console.log('timeout'), 0);
                Promise.resolve().then(() => console.log('promise'));
                outer.setAttribute('data-mutation', Math.random());
            }

            // 监听 click 事件。
            inner.addEventListener('click', handleClick);
            outer.addEventListener('click', handleClick);

            inner.click();
            console.log('end');
        </script>
    </body>
</html>
